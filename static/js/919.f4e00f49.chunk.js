"use strict";(self.webpackChunkdesign=self.webpackChunkdesign||[]).push([[919],{2253:function(r,e,n){n.d(e,{Z:function(){return t}});n(2791);var s=n(184);var t=function(r){var e=r.className,n=r.children,t=r.styleAsProps;return(0,s.jsx)("section",{className:"section ".concat(e),style:t,children:(0,s.jsx)("div",{className:"row",children:n})})}},3935:function(r,e,n){n.d(e,{Z:function(){return t}});var s=n(184),t=function(){return(0,s.jsx)("div",{className:"spinnerWrapper",children:(0,s.jsxs)("div",{class:"lds-ripple",children:[(0,s.jsx)("div",{}),(0,s.jsx)("div",{})]})})}},5919:function(r,e,n){n.r(e),n.d(e,{default:function(){return E}});var s=n(2791),t=n(4165),a=n(5861),i=n(1933),c=n(884),o=function(){var r=(0,a.Z)((0,t.Z)().mark((function r(){var e;return(0,t.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,c.Z.get("home/total_sensors");case 2:return e=r.sent,r.abrupt("return",e);case 4:case"end":return r.stop()}}),r)})));return function(){return r.apply(this,arguments)}}(),l=function(){var r=(0,a.Z)((0,t.Z)().mark((function r(e,n){var s;return(0,t.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,c.Z.get("home/sensors_list?page=".concat(e,"&limit=").concat(n));case 2:return s=r.sent,r.abrupt("return",s);case 4:case"end":return r.stop()}}),r)})));return function(e,n){return r.apply(this,arguments)}}(),d=function(){var r=(0,a.Z)((0,t.Z)().mark((function r(){var e;return(0,t.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,c.Z.get("home/total_open_alerts");case 2:return e=r.sent,r.abrupt("return",e);case 4:case"end":return r.stop()}}),r)})));return function(){return r.apply(this,arguments)}}(),u=function(){var r=(0,a.Z)((0,t.Z)().mark((function r(){var e;return(0,t.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,c.Z.get("home/sensor_temp_char");case 2:return e=r.sent,r.abrupt("return",e);case 4:case"end":return r.stop()}}),r)})));return function(){return r.apply(this,arguments)}}(),m=function(){var r=(0,a.Z)((0,t.Z)().mark((function r(){var e;return(0,t.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,c.Z.get("home/total_customers");case 2:return e=r.sent,r.abrupt("return",e);case 4:case"end":return r.stop()}}),r)})));return function(){return r.apply(this,arguments)}}(),h=n(885),p=n(3504),x=n(2426),v=n.n(x),j=n(3935),f=n(184),b=function(r){var e=r.children,n=r.color,s=r.style,t=r.onClick,a=r.type,i=r.className;return(0,f.jsx)("button",{type:a,onClick:t,color:n,style:s,className:i,children:e})},g=s.memo(b);function N(r){for(var e=r.totalSensors,n=parseInt(e),t=(0,s.useState)(1),a=(0,h.Z)(t,2),c=a[0],o=a[1],d=(0,s.useState)(5),u=(0,h.Z)(d,2),m=u[0],x=(u[1],(0,s.useState)(5)),b=(0,h.Z)(x,2),N=b[0],y=(b[1],(0,s.useState)(5)),Z=(0,h.Z)(y,2),k=Z[0],C=Z[1],S=(0,s.useState)(0),M=(0,h.Z)(S,2),Y=M[0],E=M[1],w=function(r){var e=r.currentPage,n=r.itemsPerPage,s=r.onSuccess,t=r.onError;return(0,i.useQuery)(["sensors_list",e],(function(){return l(e,n)}),{onSuccess:s,onError:t,keepPreviousData:!0})}({currentPage:c,itemsPerPage:m,onSuccess:function(r){},onError:function(r){}}),L=w.isLoading,_=w.isError,T=w.data,P=w.error,B=w.isFetching,O=null===T||void 0===T?void 0:T.data.results,R=null===T||void 0===T?void 0:T.data.next,W=null===T||void 0===T?void 0:T.data.previous,A=[],D=1;D<=Math.ceil(n/m);D++)A.push(D);var F=function(r){o(Number(r.target.id))},Q=null;A.length>k&&(Q=(0,f.jsx)("li",{onClick:function(){o(c+1),c+1>k&&(C(k+N),E(Y+N))},children:" \u2026 "}));var U=null;Y>=1&&(U=(0,f.jsx)("li",{onClick:function(){o(c-1),(c-1)%N===0&&(C(k-N),E(Y-N))},children:" \u2026 "}));var z=A.map((function(r){return r<k+1&&r>Y?(0,f.jsx)("li",{id:r,onClick:F,className:c===r?"active":null,children:r},r):null}));return(0,f.jsx)("div",{className:"col-lg-12 m-t-20",children:(0,f.jsxs)("div",{className:"card",children:[(0,f.jsx)("div",{className:"filter",children:(0,f.jsx)("a",{className:"icon",href:"#",children:(0,f.jsx)("i",{className:"bi bi-gear"})})}),(0,f.jsxs)("div",{className:"card-body",children:[(0,f.jsx)("h5",{className:"card-title",children:"SENSOR LIST"}),_&&(0,f.jsx)("div",{className:"errorWrapper",children:P instanceof Error&&(0,f.jsx)("div",{className:"errorMessage",children:P.message})}),L?(0,f.jsx)(j.Z,{}):(0,f.jsxs)("div",{className:"sensorListWrapper",children:[(0,f.jsx)("table",{className:"table table-striped",children:(0,f.jsx)("tbody",{children:O.map((function(r){var e=r.device_id,n=r.last_online,s=r.last_temp;r.customer;return function(r,e,n,s){return(0,f.jsxs)("tr",{children:[(0,f.jsx)("th",{children:r}),(0,f.jsxs)("td",{className:"hidden-xs",children:[v()(parseInt(e)).format("ll"),(0,f.jsx)("br",{}),(0,f.jsx)("small",{children:"Last Online"})]}),(0,f.jsxs)("td",{className:"hidden-xs",children:[n,(0,f.jsx)("br",{}),(0,f.jsx)("small",{children:"Temp"})]}),(0,f.jsxs)("td",{children:[s,(0,f.jsx)("br",{}),(0,f.jsx)("small",{children:"Location"})]}),(0,f.jsx)("td",{className:"hidden-xs",children:(0,f.jsx)(g,{className:"optionsButton",children:"Options"})}),(0,f.jsx)("td",{children:(0,f.jsx)(p.rU,{to:"/sensorDetails/".concat(r),children:(0,f.jsx)(g,{className:"detailsButton",children:"Details"})})})]},r)}(e,n,s,r.location)}))})}),(0,f.jsxs)("ul",{className:"pageNumbers",children:[(0,f.jsx)("li",{children:(0,f.jsx)("button",{onClick:function(){o(W.page)},disabled:1===c,children:"Prev"})}),U,z,Q,(0,f.jsx)("li",{children:(0,f.jsx)("button",{onClick:function(){o(R.page)},disabled:c===n,children:"Next"})})]}),(0,f.jsx)("div",{className:"col-12 loading",children:B&&"Loading..."})]})]})]})})}var y=s.memo(N),Z=(n(994),n(9683)),k=n(6305);k.kL.register(k.FB,k.f$,k.od,k.jn,k.Dx,k.u,k.De);var C={maintainAspectRatio:!1,legend:{display:!1,position:"bottom"},scales:{x:{type:"time",time:{displayFormats:{millisecond:"MM/YY",second:"MM/YY",minute:"MM/YY",hour:"MM/YY",day:"MM/YY",week:"MM/YY",month:"MM/YY",quarter:"MM/YY",year:"MM/YY"},tooltipFormat:"DD/MM/YY"}},y:{ticks:{min:20,max:65,stepSize:5,callback:function(r,e,n){return r+".0 \xb0C"}}}}},S=function(){var r=(0,i.useQuery)("chart_data",u),e=r.isLoading,n=r.isError,s=r.data,t=r.error;if(e)return(0,f.jsx)("h2",{children:"Loading..."});var a=null===s||void 0===s?void 0:s.data.records,c=a.map((function(r){return r.stats})),o=c[0].map((function(r){return{x:r.time,y:r.temp}})),l=c[1].map((function(r){return{x:r.time,y:r.temp}})),d=c[2].map((function(r){return{x:r.time,y:r.temp}})),m=a.map((function(r){return r.device_id})),h={datasets:[{label:m[0],data:o,borderColor:["rgb(186 181 181)"],backgroundColor:["rgba(255, 99, 132, 0.5)"],pointBackgroundColor:"rgb(255, 99, 132)",pointBorderColor:"rgba(255, 99, 132, 0.5)",borderWidth:1},{label:m[1],data:l,borderColor:["rgb(7 156 204)"],backgroundColor:["rgb(7 156 204)"],pointBackgroundColor:"rgb(7 156 204)",pointBorderColor:"rgb(7 156 204)",borderWidth:1},{label:m[2],data:d,borderColor:["rgb(244 108 119)"],backgroundColor:["rgb(233 30 46)"],pointBackgroundColor:"rgb(233 30 46)",pointBorderColor:"rgb(233 30 46)",borderWidth:1}]};return(0,f.jsx)("div",{className:"col-md-12 col-sm-12 col-xs-12",children:(0,f.jsx)("div",{className:"row",children:(0,f.jsxs)("div",{className:"sensorChartWrapper",children:[(0,f.jsx)("h4",{className:"chartTitle",children:"SENSORS TEMPRATURES"}),n&&(0,f.jsx)("div",{className:"errorWrapper",children:t instanceof Error&&(0,f.jsx)("div",{className:"errorMessage",children:t.message})}),e?(0,f.jsx)(j.Z,{}):(0,f.jsx)(Z.x1,{options:C,data:h})]})})})},M=function(r){var e=r.title,n=r.iconName,s=r.data;return(0,f.jsx)("div",{className:"col-md-4",children:(0,f.jsx)("div",{className:"card",children:(0,f.jsx)("div",{className:"card-body",children:(0,f.jsxs)("div",{className:"d-flex align-items-center justify-content-between",children:[(0,f.jsxs)("div",{className:"ps-3",children:[(0,f.jsx)("h6",{children:e}),(0,f.jsx)("span",{className:"text-muted small pt-2 ps-1",children:s})]}),(0,f.jsx)("div",{className:"card-icon rounded-circle d-flex align-items-center justify-content-center",children:(0,f.jsx)("i",{className:"bi ".concat(n),style:{fontSize:"25px"}})})]})})})})},Y=n(2253),E=function(){var r=(0,i.useQuery)("totalSensors",o),e=r.isLoading,n=(r.isError,r.data),t=(r.error,(0,i.useQuery)("totalAlerts",d)),a=t.isLoading,c=(t.isError,t.data),l=(t.error,(0,i.useQuery)("totalCustomers",m)),u=l.isLoading,h=(l.isError,l.data),p=(l.error,e||a||u),x=null===n||void 0===n?void 0:n.data.records,v=null===c||void 0===c?void 0:c.data.records,b=null===h||void 0===h?void 0:h.data.records;return(0,f.jsx)(s.Fragment,{children:(0,f.jsxs)("main",{id:"main",className:"main",children:[(0,f.jsx)(Y.Z,{className:"dashboard"}),(0,f.jsx)("div",{className:"col-lg-12",children:(0,f.jsx)("div",{className:"row",children:p?(0,f.jsx)(j.Z,{}):(0,f.jsxs)(s.Fragment,{children:[(0,f.jsx)(M,{title:"TOTAL SENSORS",iconName:"bi-kanban",data:x}),(0,f.jsx)(M,{title:"OPEN ALERTS",iconName:"bi-tags-fill",data:v}),(0,f.jsx)(M,{title:"TOTAL CUSTOMERS",iconName:"bi-pc-display-horizontal",data:b})]})})}),(0,f.jsx)(S,{}),(0,f.jsx)(y,{totalSensors:x})]})})}},884:function(r,e,n){var s=n(4569),t=n.n(s)().create({baseURL:"https://sensorsapi.herokuapp.com",headers:{"Content-Type":"application/json"}});e.Z=t}}]);
//# sourceMappingURL=919.f4e00f49.chunk.js.map